<!doctype html>
<html lang="en">

<head>
   <!-- Required meta tags -->
   <meta charset="utf-8">
   <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <!-- Bootstrap CSS -->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
   <!-- Font Awesome CDN -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous" referrerpolicy="no-referrer" />
   <!-- Styles CSS -->
   <link rel="stylesheet" href="styles.css">
   <title>Astrogrow Swap</title>

</head>

<body>
   <!-- header -->
   <header>
      <div class="d-flex justify-content-between custom-header">
         <div class="d-flex ml-2">
            <div class="logo">
               <img src="img/logo.png" alt="logo">
            </div>
         </div>
         <div class="d-flex mr-2">
            <button class="wallet-balance">
               <img class="custom-icon" src="img/ticker.png" alt="astrogrow price ticker">
               $<span id="live-price">0.00</span>
            </button>
            <button class="wallet-button" onclick="connectWallet()">Connect Wallet</button>
         </div>
         <div class="d-flex mr-2 dc-none">
            <div id="nav-toggle" onclick="toggleNav()">
               <i class="fa-solid fa-bars"></i>
            </div>
         </div>
      </div>
   </header>
   <!-- sidebar -->
   <nav class="side-nav" id="to-toggle">
      <ul>
         <li>
            <a href="comingsoon.html">
               <i class="fa-solid fa-house"></i>
               <span>Home</span>
            </a>
         </li>
         <li>
            <a href="javascript:void(0)" class="active">
               <i class="fa-solid fa-coins"></i>
               <span>Staking Pools</span>
            </a>
         </li>
         <li>
            <a href="swap.html">
               <i class="fa-solid fa-arrow-right-arrow-left"></i>
               <span>Swap</span>
            </a>
         </li>
         <li>
            <a href="comingsoon.html">
               <i class="fa-solid fa-rocket"></i>
               <span>Launchpad</span>
            </a>
         </li>
         <li>
            <a href="comingsoon.html">
               <i class="fa-solid fa-gamepad"></i>
               <span>Raffle/Games</span>
            </a>
         </li>
         <li>
            <a href="comingsoon.html">
               <i class="fa-solid fa-chart-pie"></i>
               <span>Governance</span>
            </a>
         </li>
         <li>
            <a href="https://astrogrow.io/dashboard">
               <span>ATGx Presale</span>
            </a>
         </li>
      </ul>
   </nav>
   <!-- body -->
   <section class="swap-section">
      <div class="container-fluid">
         <div class="row">
            <!-- First box -->
            <div class="col-lg-3">
               <div class="card-container mt-85">
                  <form action="">
                     <div class="row">
                        <div class="col-8 d-flex align-items-center">
                           <label for="From">ATG Native</label>
                        </div>
                        <div class="col-4 d-flex justify-content-end">
                           <img class="staking-icon" src="img/atg-icon.png" alt="">
                        </div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Stake:</div>
                        <div class="bold">ATG</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Reward:</div>
                        <div class="bold">ATG</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>APY:</div>
                        <div class="bold">25%</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Deposit Fee:</div>
                        <div class="bold">0 (Tax only)</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Withdrawal Fee:</div>
                        <div class="bold">0 (Tax exempted)</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Total Stake:</div>
                        <div class="bold"><span id="totalStaked0" value="0">0</span></div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Current Stake:</div>
                        <div class="bold"><span id="currentStaked0">0</span></div>
                     </div>
                     <button class="btn-custom-4 mb-2" type="button" onclick="approve()">Approve</button>
                     <div class="d-flex mb-2 justify-content-between">
                        <input class="value-field-2" type="number" value="0" name="" id="stakeInput">
                        <button class="btn-custom-4-r" type="button" onclick="stake()">Stake</button>
                     </div>
                     <h5 class="d-flex align-items-center">ATG Earned:</h5>
                     <div class="d-flex mb-2 justify-content-between">
                        <input class="value-field-2" type="number" id="earnedAtg" disabled>
                        <button class="btn btn-primary" type="button" onclick="claimReward()">Harvest</button>
                     </div>
                  </form>
               </div>
            </div>
            <!-- Second box -->
            <div class="col-lg-3">
               <div class="card-container mt-85">
                  <form action="">
                     <div class="row">
                        <div class="col-8 d-flex align-items-center">
                           <label for="From">ATG LP</label>
                        </div>
                        <div class="col-4 d-flex justify-content-end">
                           <img class="staking-icon" src="img/atg-icon.png" alt="">
                        </div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Stake:</div>
                        <div class="bold">LP ATG+BNB</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Reward:</div>
                        <div class="bold">ATG</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>APY:</div>
                        <div class="bold">100%</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Deposit Fee:</div>
                        <div class="bold">0 (Tax only)</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Withdrawal Fee:</div>
                        <div class="bold">0 (Tax exempted)</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Total Stake:</div>
                        <div class="bold" id="totalStaked">0</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Current Stake:</div>
                        <div class="bold" id="currentStaked">0</div>
                     </div>
                     <button class="btn-custom-4 mb-2">Approve</button>
                     <div class="d-flex mb-2 justify-content-between">
                        <input class="value-field-2" type="text" value="0" name="" id="">
                        <button class="btn-custom-4-r">Stake</button>
                     </div>
                     <h5 class="d-flex align-items-center">ATG Earned:</h5>
                     <div class="d-flex mb-2 justify-content-between">
                        <input class="value-field-2" type="text" value="0" name="" id="">
                        <button class="bc-disabled">Harvest</button>
                     </div>
                  </form>
               </div>
            </div>
            <!-- Third box -->
            <div class="col-lg-3">
               <div class="card-container mt-85">
                  <form action="">
                     <div class="row">
                        <div class="col-8 d-flex align-items-center">
                           <label for="From">ATGx Native</label>
                        </div>
                        <div class="col-4 d-flex justify-content-end">
                           <img class="staking-icon" src="img/atgx-icon.png" alt="">
                        </div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Stake:</div>
                        <div class="bold">ATGx</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Reward:</div>
                        <div class="bold">ATGx</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>APY:</div>
                        <div class="bold">50%</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Deposit Fee:</div>
                        <div class="bold">0 (Tax only)</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Withdrawal Fee:</div>
                        <div class="bold">0 (Tax exempted)</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Total Stake:</div>
                        <div class="bold" id="totalStaked">0</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Current Stake:</div>
                        <div class="bold" id="currentStaked">0</div>
                     </div>
                     <button class="btn-custom-4 mb-2">Approve</button>
                     <div class="d-flex mb-2 justify-content-between">
                        <input class="value-field-2" type="text" value="0" name="" id="">
                        <button class="btn-custom-4-r">Stake</button>
                     </div>
                     <h5 class="d-flex align-items-center">ATGx Earned:</h5>
                     <div class="d-flex mb-2 justify-content-between">
                        <input class="value-field-2" type="text" value="0" name="" id="">
                        <button class="bc3-disabled">Harvest</button>
                     </div>
                  </form>
               </div>
            </div>
            <!-- Forth box -->
            <div class="col-lg-3">
               <div class="card-container mt-85">
                  <form action="">
                     <div class="row">
                        <div class="col-8 d-flex align-items-center">
                           <label for="From">ATGx LP</label>
                        </div>
                        <div class="col-4 d-flex justify-content-end">
                           <img class="staking-icon" src="img/atgx-icon.png" alt="">
                        </div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Stake:</div>
                        <div class="bold">LP ATGx+BNB</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Reward:</div>
                        <div class="bold">ATGx</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>APY:</div>
                        <div class="bold">150%</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Deposit Fee:</div>
                        <div class="bold">0 (Tax only)</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Withdrawal Fee:</div>
                        <div class="bold">0 (Tax exempted)</div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Total Stake:</div>
                        <div class="bold"><span id="totalStaked">0</span></div>
                     </div>
                     <div class="d-flex justify-content-between balance">
                        <div>Current Stake:</div>
                        <div class="bold" id="currentStaked">0</div>
                     </div>
                     <button class="btn-custom-4 mb-2">Approve</button>
                     <div class="d-flex mb-2 justify-content-between">
                        <input class="value-field-2" type="text" value="0" name="" id="">
                        <button class="btn-custom-4-r">Stake</button>
                     </div>
                     <h5 class="d-flex align-items-center">ATGx Earned:</h5>
                     <div class="d-flex mb-2 justify-content-between">
                        <input class="value-field-2" type="text" value="0" name="" id="">
                        <button class="bc3-disabled">Harvest</button>
                     </div>
                  </form>
               </div>
            </div>
         </div>
      </div>
   </section>

   <!-- Modal -->
   <div class="modal fade" id="WalletModal" tabindex="-1" role="dialog" aria-labelledby="WalletModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
         <div class="modal-content">
            <div class="modal-header">
               <h5 class="modal-title" id="WalletModalLabel">Connect to a wallet</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
               </button>
            </div>
            <div class="modal-body">
               <div class="container">
                  <div class="row bg-in" onclick="load()">
                     <div class="col">
                        <h4>METAMASK</h4>
                     </div>
                     <div class="col">
                        <img src="img/metamask-icon.webp" alt="metamask-icon">
                     </div>
                  </div>

                  <div class="row bg-in" onclick="connectWc()">
                     <div class="col">
                        <h4>Wallet Connect</h4>
                     </div>
                     <div class="col">
                        <img src="img/trustwallet-icon.png" alt="trustwallet-icon">
                     </div>
                  </div>

               </div>
            </div>
            <div class="modal-footer">
               <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
         </div>
      </div>
   </div>
   <!-- Optional JavaScript -->
   <!-- jQuery first, then Popper.js, then Bootstrap JS -->
   <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.7.1/dist/umd/index.min.js"></script>

   <script>
window.onload = (event) => {
        isConnected();
        load()
     };
     
      const walletButton = document.querySelectorAll('.wallet-button');
            
      async function isConnected() {
         const accounts = await ethereum.request({method: 'eth_accounts'});       
         if (accounts.length) {

            walletButton.forEach(walletButton => {
            walletButton.innerHTML = 'Wallet Connected';
            walletButton.style.backgroundColor = '#1e0835';
            walletButton.style.color = '#f4f4f4';
            });
         } else {
            walletButton.innerHTML = "Unlock Wallet";
         }
      }
      
      let account;
      var provider = new WalletConnectProvider.default({
         rpc: {
            97: "https://data-seed-prebsc-1-s1.binance.org:8545/", // https://ethereumnodes.com/ // https://docs.polygon.technology/docs/develop/network-details/network/
            56: "https://data-seed-prebsc-1-s1.binance.org:8545/"
            // ...

         },
         // bridge: 'https://bridge.walletconnect.org',
      });
      let currentAcc;
      var connectWc = async () => {
         await provider.enable()
         window.web3 = new Web3(provider)
         let accounts = await web3.eth.getAccounts()
         account = accounts[0];
         currentAcc = account
         console.log('hello1');
         window.stakingContract = await loadStakingContract();
         window.tokenContract = await loadTokenontract();
         console.log('staking==>', window.stakingContract)
         console.log('token==>', window.tokenContract)
         await calculatePendingRewards();
         console.log('hellooooo')
         let totalStake = await window.stakingContract.methods.YourTotalStakingTillToday(currentAcc).call();
         let currentStake = await window.stakingContract.methods.ActiveStakeDeposit(currentAcc).call();
         console.log(totalStake);
         console.log(currentStake)
         let totalStakeElement = document.getElementById('totalStaked0').value;
         let currentStakeElement = document.getElementById('currentStaked0').value
         currentStakeElement = currentStake/1000000000
         totalStakeElement = totalStake/1000000000
      }
      var connectWallet = function () {
         // ethereum.enable();
         event.preventDefault();
         $('#WalletModal').modal('show')
      }
      // document.getElementById('nav-toggle').onclick = test();
      function toggleNav() {
         document.getElementById('to-toggle').classList.toggle('sidenav-hide');
         document.querySelector('.swap-section').classList.toggle('full-width-section');
      }

      var isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      if (!isMobile) {
         document.getElementById('to-toggle').classList.add("sidenav-hide");
      }
      ////////////////LIVE PRICE//////////////////
      fetch('https://api.pancakeswap.info/api/v2/tokens/0x9d5758d86998d74f002c218c9967980a238beb55')
         .then(response => response.json())
         .then(data => document.getElementById("live-price").innerHTML = parseFloat(data.data.price).toFixed(7));
      fetch('https://api.pancakeswap.info/api/v2/tokens/0x9d5758d86998d74f002c218c9967980a238beb55')
         .then(response => response.json())
         .then(data => document.getElementById("live-price2").innerHTML = parseFloat(data.data.price).toFixed(7));

      let checkAcc = async () => {
         let accounts = await web3.eth.getAccounts();
         return accounts[0]

      }


      async function approve() {

         await window.tokenContract.methods.approveMax(stakingAddress).send({
            from: currentAcc,
            gas: 2100000
         }).then((res) => {
            console.log('done == >', res)
         })
      }
      async function loadWeb3() {
         if (window.ethereum) {
            window.web3 = new Web3(window.ethereum);
            window.ethereum.enable();
            console.log('hello from if')
         } else {
            alert("please install metamask");
         }
         console.log('hello')
      }

      let tokenABI = [{ "inputs": [{ "internalType": "address", "name": "_dexRouter", "type": "address" }], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "owner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "spender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Approval", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "amountBNB", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "amountBOG", "type": "uint256" }], "name": "AutoLiquify", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint256", "name": "duration", "type": "uint256" }], "name": "BuybackMultiplierActive", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "owner", "type": "address" }], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Transfer", "type": "event" }, { "inputs": [], "name": "MASK", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "WBNB", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_maxTxAmount", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "holder", "type": "address" }, { "internalType": "address", "name": "spender", "type": "address" }], "name": "allowance", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "approve", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }], "name": "approveMax", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "adr", "type": "address" }], "name": "authorize", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "autoBuybackEnabled", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "autoLiquidityReceiver", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "account", "type": "address" }], "name": "balanceOf", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "clearBuybackMultiplier", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "decimals", "outputs": [{ "internalType": "uint8", "name": "", "type": "uint8" }], "stateMutability": "pure", "type": "function" }, { "inputs": [], "name": "distributorAddress", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getCirculatingSupply", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "accuracy", "type": "uint256" }], "name": "getLiquidityBacking", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getMultipliedFee", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getOwner", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bool", "name": "selling", "type": "bool" }], "name": "getTotalFee", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "adr", "type": "address" }], "name": "isAuthorized", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "target", "type": "uint256" }, { "internalType": "uint256", "name": "accuracy", "type": "uint256" }], "name": "isOverLiquified", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "account", "type": "address" }], "name": "isOwner", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "launch", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "launchedAt", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "launchedAtTimestamp", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "marketingFeeReceiver", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "name", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "pure", "type": "function" }, { "inputs": [], "name": "pair", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "router", "outputs": [{ "internalType": "contract IDEXRouter", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bool", "name": "_enabled", "type": "bool" }, { "internalType": "uint256", "name": "_cap", "type": "uint256" }, { "internalType": "uint256", "name": "_amount", "type": "uint256" }, { "internalType": "uint256", "name": "_period", "type": "uint256" }], "name": "setAutoBuybackSettings", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "numerator", "type": "uint256" }, { "internalType": "uint256", "name": "denominator", "type": "uint256" }, { "internalType": "uint256", "name": "length", "type": "uint256" }], "name": "setBuybackMultiplierSettings", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "_minPeriod", "type": "uint256" }, { "internalType": "uint256", "name": "_minDistribution", "type": "uint256" }], "name": "setDistributionCriteria", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "gas", "type": "uint256" }], "name": "setDistributorSettings", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_autoLiquidityReceiver", "type": "address" }, { "internalType": "address", "name": "_marketingFeeReceiver", "type": "address" }], "name": "setFeeReceivers", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "_liquidityFee", "type": "uint256" }, { "internalType": "uint256", "name": "_buybackFee", "type": "uint256" }, { "internalType": "uint256", "name": "_reflectionFee", "type": "uint256" }, { "internalType": "uint256", "name": "_marketingFee", "type": "uint256" }, { "internalType": "uint256", "name": "_feeDenominator", "type": "uint256" }], "name": "setFees", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "holder", "type": "address" }, { "internalType": "bool", "name": "exempt", "type": "bool" }], "name": "setIsDividendExempt", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "holder", "type": "address" }, { "internalType": "bool", "name": "exempt", "type": "bool" }], "name": "setIsFeeExempt", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "holder", "type": "address" }, { "internalType": "bool", "name": "exempt", "type": "bool" }], "name": "setIsTxLimitExempt", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "bool", "name": "_enabled", "type": "bool" }, { "internalType": "uint256", "name": "_amount", "type": "uint256" }], "name": "setSwapBackSettings", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "_target", "type": "uint256" }, { "internalType": "uint256", "name": "_denominator", "type": "uint256" }], "name": "setTargetLiquidity", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "setTxLimit", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "swapEnabled", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "swapThreshold", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "symbol", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "pure", "type": "function" }, { "inputs": [], "name": "totalSupply", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "transfer", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "sender", "type": "address" }, { "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "transferFrom", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address payable", "name": "adr", "type": "address" }], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amount", "type": "uint256" }, { "internalType": "bool", "name": "triggerBuybackMultiplier", "type": "bool" }], "name": "triggerZeusBuyback", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "adr", "type": "address" }], "name": "unauthorize", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "stateMutability": "payable", "type": "receive" }]
      let stakingABI = [{ "anonymous": false, "inputs": [{ "indexed": true, "internalType": "uint256", "name": "tokens", "type": "uint256" }], "name": "AddedToExistingStake", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "_to", "type": "address" }], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "uint256", "name": "_rewards", "type": "uint256" }], "name": "RewardsCollected", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "uint256", "name": "_amount", "type": "uint256" }], "name": "StakeStarted", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "uint256", "name": "_refunded", "type": "uint256" }], "name": "StakingStopped", "type": "event" }, { "inputs": [], "name": "AGTNative", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_user", "type": "address" }], "name": "ActiveStakeDeposit", "outputs": [{ "internalType": "uint256", "name": "_activeDeposit", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "ClaimReward", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_user", "type": "address" }], "name": "LastStakedOn", "outputs": [{ "internalType": "uint256", "name": "_unixLastStakedTime", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_caller", "type": "address" }], "name": "PendingReward", "outputs": [{ "internalType": "uint256", "name": "_pendingRewardWeis", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "_amount", "type": "uint256" }], "name": "Stake", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "StopStaking", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_user", "type": "address" }], "name": "TotalStakingRewards", "outputs": [{ "internalType": "uint256", "name": "_totalEarned", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_user", "type": "address" }], "name": "YourTotalStakingTillToday", "outputs": [{ "internalType": "uint256", "name": "_totalStaking", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "owner", "outputs": [{ "internalType": "address payable", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "stakingRate", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "totalRewards", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "totalStakes", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address payable", "name": "_newOwner", "type": "address" }], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }]
      let tokenAddress = "0x4128C8Da229599C6d2d7E23bd449f047a5eB7f73";
      let stakingAddress = "0x346bfD04c49118Ee71Fd23b3e1813a34cc595f9f";

      async function loadStakingContract() {
         return await new window.web3.eth.Contract(
            stakingABI,
            stakingAddress
         );
      }
      async function loadTokenontract() {
         return await new window.web3.eth.Contract(
            tokenABI,
            tokenAddress
         );
      }
      async function loadSmartContract() {
         window.stakingContract = await loadStakingContract();
         window.tokenContract = await loadTokenontract();
      }
      async function load() {
         await loadWeb3();
         let accounts = await window.ethereum.request({ method: "eth_requestAccounts" })
         console.log(accounts)
         currentAcc = accounts[0]

         window.stakingContract = await loadStakingContract();
         window.tokenContract = await loadTokenontract();

         console.log('hello from load()')

         console.log(currentAcc)
         if (window.stakingContract) {
            await calculatePendingRewards();
            console.log('calculated')
         }
         let totalStake = await window.stakingContract.methods.YourTotalStakingTillToday(currentAcc).call();
         let currentStake = await window.stakingContract.methods.ActiveStakeDeposit(currentAcc).call();
         console.log(totalStake);
         console.log(currentStake)
         let totalStakeElement = document.getElementById('totalStaked0')
         let currentStakeElement = document.getElementById('currentStaked0');
         currentStakeElement.innerHTML = currentStake/1000000000
         totalStakeElement.innerHTML = totalStake/1000000000

      }
      async function stake() {
         let accounts = await web3.eth.getAccounts();
         let account = accounts[0];
         let tokenValueToStake = document.getElementById('stakeInput').value;
         let updatedVale = tokenValueToStake * (10 ** 9);
         console.log(updatedVale);
         await window.stakingContract.methods.Stake(updatedVale).send({
            from: account,
            gas: 2100000
         }).then((res) => {
            console.log('hello ==>', res)
         })
      }
      async function calculatePendingRewards() {
         let PendingRewards = await window.stakingContract.methods.PendingReward(currentAcc).call();
         console.log('hello form 1')
         console.log('hello ==>', PendingRewards)
         if (PendingRewards) {
            document.getElementById('earnedAtg').value = PendingRewards/1000000000;
         }
      }
      async function claimReward() {
         await window.stakingContract.methods.ClaimReward().send({
            from: currentAcc,
            gas: 2100000
         }).then((res) => {
            console.log('tx ==> ', res)
         })

      }


   </script>
</body>

</html>